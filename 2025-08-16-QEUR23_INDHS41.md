---
title: QEUR23_INDHS41 - 閑話休題～ヴェーダ数秘術をやってみる(併用法NO2-分割)   
date: 2025-08-16
tags: ["QEUシステム", "メトリックス", "Python言語", "Unsloth", "LLM", "データセット", "BONSAI", "LangGraph"]
excerpt: あたらしいLLMの学習体系を確立する
---

## QEUR23_INDHS41 - 閑話休題～ヴェーダ数秘術をやってみる(併用法NO2-分割)     

## ～  現状のVibe Codingの限界が見えて来た ～

QEU:FOUNDER ： “前回のプログラムの出来が酷かったね・・・（笑）。評価できるのは、単に「（プログラムが）動きます」だけだった。”

![imageINDS2-41-1](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-1.jpg) 

D先生： “まあ・・・、プロジェクトの最初ですからね。ちょっと、前回をレビューしましょう。運勢は、インド占星術のナクシャトラだけで計算したのですよね。 “

![imageINDS2-41-2](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-2.jpg) 

QEU:FOUNDER ： “こりゃあ、ひどい出来・・・。**21世紀のテクノロジの在り方を根本的に変えた人**だよ。”

==================================================

【Steve Jobs 様のヴェーダ数秘術分析結果】

==================================================

【基本分析】

誕生数: 1 (सूर्य (Surya: 太陽))

- 強み: リーダーシップ, 自信, 意志力, 創造性, 独立心
- 弱み: 独善的, 頑固, 自己中心, 威圧的
- 人生テーマ: 自己実現、リーダーシップの確立、個人の力の発揮

運命数: 4 (कुज (Kuja: 火星))

- 人生の目的: 挑戦への対応、エネルギーの管理、自己防衛
- 幸運の色: 赤, オレンジ, 茶色

【能力・適性評価】

- 教師・人文系・ライター: ★★★☆☆ (3/5)
- 科学者・数学者・エンジニア: ★★☆☆☆ (2/5)
- 宗教家・哲学者: ★★★☆☆ (3/5)
- オフィスワーカー・マネージャー: ★★★★☆ (4/5)
- シェフ・アーティスト: ★★★★★ (5/5)
- エンターテイナー・ミュージシャン: ★★★★★ (5/5)
- 経営者・CEO: ★★★★★ (5/5)
- 政治家・公務員: ★★★★☆ (4/5)

【健康リスクとアドバイス】

- リスク: 心臓, 目, 高血圧, 頭痛
- アドバイス: ストレス管理, 適度な運動, 十分な休息

【幸運要素】

- 幸運の色: 金色, オレンジ, 赤
- 幸運の宝石: ルビー, サンゴ
- 幸運の金属: 金
- 幸運の曜日: 日曜日
- 幸運の方角: 東

D先生： “使っている数字が**誕生数と運命数だけ**ですからね。そういえば、ヴェーダ数秘術の場合、どれだけの種類の数を計算できるのですか？”

QEU:FOUNDER： “う～ん・・・、実は今でも確定ではない（調査中）のだが。多分、これだけあると思います。”

### ヴェーダ数秘術の主な数の種類と計算方法

| 略称 | 名称 | 意味 | 計算方法 |
|------|------|------|-----------|
| **LP** | ライフパスナンバー(誕生数) | 人生の目的・テーマ | 生年月日をすべて足して一桁に還元（例：1990年12月25日 → 1+9+9+0+1+2+2+5 = 29 → 2+9 = **11** → 1+1 = **2**） |
| **D** | ディスティニーナンバー（運命数） | 才能・使命・社会的役割 | 名前のすべての文字（母音＋子音）を数に変換し、合計して一桁に還元 |
| **S** | ソウルナンバー（魂の欲求数） | 内なる欲求・本質的な動機 | 名前の**母音のみ**を数に変換し、合計して一桁に還元 |
| **P** | パーソナリティナンバー | 外面的な印象・他者からの見え方 | 名前の**子音のみ**を数に変換し、合計して一桁に還元 |
| **M** | マチュリティナンバー（成熟数） | 人生後半のテーマ・到達点 | LPナンバーとDナンバーを足して還元（例：LP 7 + D 6 = 13 → 1+3 = **4**） |
| **B** | バースデーナンバー | 生まれた日が持つ個性 | 誕生日の日付（例：25日 → 2+5 = **7**） |
| **G** | グロースナンバー（成長数） | 成長の鍵・人生の課題 | ファーストネームの最初の母音を数に変換 |
| **H** | ハートナンバー | 感情面の反応・愛のスタイル | ソウルナンバーと関連（母音から導出） |
| **K** | カルマナンバー | 過去世からの課題・未解決のテーマ | 名前に**欠けている数字**を調べる（1〜9のうち使われていない数字） |
| **C** | チャレンジナンバー | 人生の困難・乗り越えるべき課題 | 生年月日から特定の方法で導出（流派により異なる） |


D先生： “こんなにあるんですねえ。それにしても、J語とのマッチングがわるいなあ・・・。”

QEU:FOUNDER ： “カバラ（数秘術）と用語を合わせると、いろいろ矛盾が出てくるんです。まあ、今回は見逃してください。今回から、プログラムを分割します。”

### **ファイル構成**

project_directory/

├── main_program.py

├── nakshatra_fortune_calculator.py

├── numerology_calculator.py 

├── julian_birth_number_calculator.py 

├── locations.json

├── nakshatra_data.json

├── career_data.json

└── skyfield_data/ (Skyfieldが自動生成)

    └── de440s.bsp (または de421.bsp)

D先生： “プログラムだけでなく、jsonファイルも増えています。まあ、いままでのプログラム長が異常でした。”

QEU:FOUNDER ： “小生、ちょっと思うのよ・・・。**「Vibe Codingの限界が見えてきたなぁ」**って・・・。”

![imageINDS2-41-3](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-3.jpg) 

D先生： “ダウト！！使っている**「エンジン」**に問題あるんじゃないのですか？”

![imageINDS2-41-4](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-4.jpg) 

QEU:FOUNDER ： “たしかに、最近のDSはまあまあだわね・・・。しかし、同時に使っているG某Kでも同じ傾向です。プログラムが長くなると、LLMの問題解決力が一気に弱くなります。”

D先生： “具体的には？”

QEU:FOUNDER ： “それでは事例研究に行きましょう。プログラムをドン！！”

```python
# ---
# julian_birth_number_calculator.py
import logging
from datetime import datetime
import pytz
from skyfield.api import load, utc
import json
import os

# ロギングの設定
logging.basicConfig(level=logging.INFO) # 必要に応じて WARNING に変更
logger = logging.getLogger(__name__)

def load_numerology_data():
    """数秘術データをロードする (必要な部分のみ)"""
    try:
        with open('numerology_data.json', 'r', encoding='utf-8') as f:
            full_data = json.load(f)
        # 必要なのは数秘術データ本体のみ
        return full_data
    except Exception as e:
        logger.error(f"数秘術データのロード中にエラー: {str(e)}")
        return {}

class JulianBirthNumberCalculator:
    """
    生年月日・時間からユリウス歴と運命数（ライフパスナンバー）を計算するクラス。
    """
    def __init__(self, numerology_data=None):
        """初期化"""
        self.numerology_data = numerology_data or load_numerology_data()
        self._init_skyfield()

    def _init_skyfield(self):
        """Skyfieldの初期化"""
        try:
            temp_dir = os.path.join(os.getcwd(), 'skyfield_data')
            os.makedirs(temp_dir, exist_ok=True)
            load.directory = temp_dir
            logger.debug("Ephemerisをロード中...")
            try:
                self.ephemeris = load('de440s.bsp')
                logger.debug("Ephemeris de440s.bspのロードが完了しました")
            except Exception as e:
                logger.warning(f"de440s.bspのロードに失敗: {str(e)}")
                logger.info("代替としてde421.bspを使用します")
                self.ephemeris = load('de421.bsp')
            self.ts = load.timescale(builtin=True)
        except Exception as e:
            logger.error(f"Ephemerisのロードに失敗: {str(e)}")
            raise

    def _reduce_to_single_digit(self, number: int) -> int:
        """数値を1桁に還元 (マスターナンバー11, 22, 33は保持)"""
        if number in [11, 22, 33]:
            return number
        while number > 9:
            number = sum(int(digit) for digit in str(number))
            if number in [11, 22, 33]:
                break
        return number

    def calculate_julian_date(self, birth_datetime: datetime) -> float:
        """
        生年月日時刻をユリウス日（JD）に変換します。

        Args:
            birth_datetime (datetime): タイムゾーン情報付きの生年月日時刻。

        Returns:
            float: ユリウス日 (JD)。
        """
        try:
            # UTCに変換
            birth_utc = birth_datetime.astimezone(pytz.utc)
            # Skyfield用の時刻オブジェクトを作成
            t = self.ts.utc(
                birth_utc.year,
                birth_utc.month,
                birth_utc.day,
                birth_utc.hour,
                birth_utc.minute,
                birth_utc.second
            )
            # ユリウス日を取得
            jd = t.tt # tt (Terrestrial Time) が一般的に使われる
            logger.info(f"ユリウス日計算: {birth_datetime} (UTC) -> JD {jd}")
            return jd
        except Exception as e:
            logger.error(f"ユリウス日計算エラー: {str(e)}")
            # フォールバック: 単純な変換 (精度はやや劣る)
            import calendar
            y, m, d = birth_datetime.year, birth_datetime.month, birth_datetime.day
            h, mn, s = birth_datetime.hour, birth_datetime.minute, birth_datetime.second
            if m <= 2:
                y -= 1
                m += 12
            a = int(y / 100)
            b = 2 - a + int(a / 4)
            jd = int(365.25 * (y + 4716)) + int(30.6001 * (m + 1)) + d + h/24.0 + mn/1440.0 + s/86400.0 + b - 1524.5
            logger.warning(f"フォールバック計算でJDを算出: {jd}")
            return jd

    def _julian_day_to_julian_ymd(self, jd: float) -> tuple:
        """
        ユリウス日 (JD) をユリウス暦の年、月、日に変換します。
        """
        jd += 0.5  # 午前0時基準に調整
        z = int(jd)
        f = jd - z

        a = z
        if z >= 2299161:
            alpha = int((z - 1867216.25) / 36524.25)
            a = z + 1 + alpha - int(alpha / 4)

        b = a + 1524
        c = int((b - 122.1) / 365.25)
        d = int(365.25 * c)
        e = int((b - d) / 30.6001)

        day = b - d - int(30.6001 * e) + f
        month = e - (1 if e < 14 else 13)
        year = c - (4716 if month > 2 else 4715)

        return int(year), int(month), int(day)

    def calculate_birth_number_from_julian(self, birth_datetime: datetime) -> dict:
        """
        ユリウス日を基にライフパスナンバー（運命数）を計算します。
        計算詳細を含む辞書を返します。

        Returns:
            dict: 計算結果と詳細情報を含む辞書
        """
        try:
            julian_date = self.calculate_julian_date(birth_datetime)
            year, month, day = self._julian_day_to_julian_ymd(julian_date)

            day_reduced = self._reduce_to_single_digit(day)
            month_reduced = self._reduce_to_single_digit(month)
            year_reduced = self._reduce_to_single_digit(year)

            total = day_reduced + month_reduced + year_reduced
            result = self._reduce_to_single_digit(total)

            if result == 0:
                logger.warning("ライフパスナンバーが0となったため、1に修正")
                result = 1

            # 詳細な計算情報を構築
            calculation_details = {
                "julian_date": julian_date,
                "julian_ymd": (year, month, day),
                "original_values": {
                    "day": day,
                    "month": month,
                    "year": year
                },
                "reduced_values": {
                    "day_reduced": day_reduced,
                    "month_reduced": month_reduced,
                    "year_reduced": year_reduced
                },
                "total": total,
                "final_result": result
            }

            logger.info(f"ユリウス暦 ライフパスナンバー計算: {year}-{month:02d}-{day:02d} -> "
                        f"Day({day}->{day_reduced}) + "
                        f"Month({month}->{month_reduced}) + "
                        f"Year({year}->{year_reduced}) = "
                        f"{total} -> {result}")
            return calculation_details
        except Exception as e:
            logger.error(f"ユリウス日からのライフパスナンバー計算エラー: {str(e)}")
            return {
                "error": str(e),
                "julian_date": None,
                "julian_ymd": (None, None, None),
                "original_values": {"day": None, "month": None, "year": None},
                "reduced_values": {"day_reduced": None, "month_reduced": None, "year_reduced": None},
                "total": None,
                "final_result": 1  # フォールバック
            }

    def get_birth_number_details(self, birth_number: int) -> dict:
        """
        運命数に対応する詳細情報を取得します。

        Args:
            birth_number (int): 計算されたライフパスナンバー。

        Returns:
            dict: 惑星、性格、能力などの情報を含む辞書。
        """
        birth_number_str = str(birth_number)
        details = self.numerology_data.get(birth_number_str, {})
        # デフォルト値を設定
        default_info = {
            "planet": "不明",
            "strengths": ["情報なし"],
            "weaknesses": ["情報なし"],
            "life_themes": "情報なし",
            "health_risks": ["情報なし"],
            "health_advice": ["情報なし"]
        }
        # 取得した情報でデフォルトを更新
        for key in default_info:
            if key in details:
                default_info[key] = details[key]
        return default_info

    def calculate(self, birth_datetime: datetime, end_year: int) -> dict:
        """
        ユリウス日、運命数、および詳細情報を計算します。

        Args:
            birth_datetime (datetime): タイムゾーン情報付きの生年月日時刻。
            end_year (int): グラフ作成の最終年 (このメソッドでは使用されませんが、インターフェースの統一のため)。

        Returns:
            dict: ユリウス日、運命数、計算式、詳細情報などを含む結果辞書。
        """
        logger.info("ユリウス日・運命数計算を開始します。")
        try:
            calculation_details = self.calculate_birth_number_from_julian(birth_datetime)
            if "error" in calculation_details:
                raise Exception(calculation_details["error"])
            
            birth_number = calculation_details["final_result"]
            details = self.get_birth_number_details(birth_number)

            # 詳細な計算式を構築
            julian_ymd = calculation_details["julian_ymd"]
            original = calculation_details["original_values"]
            reduced = calculation_details["reduced_values"]
            
            calculation_formula = (
                f"ユリウス暦 {julian_ymd[0]}年{julian_ymd[1]:02d}月{julian_ymd[2]:02d}日\n"
                f"  日: {original['day']} → {reduced['day_reduced']}\n"
                f"  月: {original['month']} → {reduced['month_reduced']}\n"
                f"  年: {original['year']} → {reduced['year_reduced']}\n"
                f"  合計: {reduced['day_reduced']} + {reduced['month_reduced']} + {re-duced['year_reduced']} = {calculation_details['total']}\n"
                f"  ライフパスナンバー: {calculation_details['total']} → {birth_number}"
            )

            result = {
                "julian_date": calculation_details["julian_date"],
                "julian_ymd": calculation_details["julian_ymd"],
                "birth_number": birth_number,
                "calculation_details": calculation_details,
                "calculation_formula": calculation_formula,
                "details": details
            }
            logger.info("ユリウス日・運命数計算が完了しました。")
            return result
        except Exception as e:
            logger.error(f"計算中にエラーが発生しました: {e}")
            return {
                "error": str(e),
                "julian_date": None,
                "julian_ymd": (None, None, None),
                "birth_number": None,
                "calculation_details": {},
                "calculation_formula": "",
                "details": {}
            }

# --- メイン実行ブロック ---
if __name__ == "__main__":
    # テスト用の日時 (例: 1955年2月24日 19:00, ロサンゼルス)
    test_birth_date = datetime(1955, 2, 24, 19, 0)
    test_birth_place_tz = pytz.timezone('America/Los_Angeles')
    test_birth_datetime = test_birth_place_tz.localize(test_birth_date)
    test_end_year = 2012

    print(f"--- {test_birth_datetime} のユリウス日・運命数計算 ---")
    try:
        calculator = JulianBirthNumberCalculator()
        results = calculator.calculate(test_birth_datetime, test_end_year)

        if 'error' in results:
            print(f"エラー: {results['error']}")
        else:
            print(f"ユリウス日 (JD): {results['julian_date']}")
            julian_ymd = results['julian_ymd']
            print(f"ユリウス暦: {julian_ymd[0]}年{julian_ymd[1]:02d}月{julian_ymd[2]:02d}日")
            print(f"運命数 (ライフパスナンバー): {results['birth_number']}")
            print("計算式:")
            print(results['calculation_formula'])
            print("\n--- 運命数詳細 ---")
            print(f"  惑星: {results['details'].get('planet', 'N/A')}")
            print(f"  強み: {', '.join(results['details'].get('strengths', ['N/A']))}")
            print(f"  弱み: {', '.join(results['details'].get('weaknesses', ['N/A']))}")
            print(f"  人生のテーマ: {results['details'].get('life_themes', 'N/A')}")
            print(f"  健康リスク: {', '.join(results['details'].get('health_risks', ['N/A']))}")
            print(f"  健康アドバイス: {', '.join(results['details'].get('health_advice', ['N/A']))}")

    except Exception as e:
        logger.error(f"メイン実行中にエラーが発生しました: {e}")


```

D先生：“結果は？”

![imageINDS2-41-5](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-5.jpg) 

D先生：“あれ？なんと、ライフパスナンバー（誕生数）が**マスターナンバー（11）になった**のですか？さっきまで、この数は１だったのに・・・。”

QEU:FOUNDER ： “せっかくプログラムに**ユリウス暦**を入れているのに、そのロジックが使われていなかったんです。”

- **1（太陽：Surya）**
  - **性格**：リーダーシップ、自信、独立心、威厳、決断力。自己主張が強く、目標に向かって突き進む。
  - **能力**：指導力、創造的発想、率先して行動する力。組織やプロジェクトの中心となる。
  - **長所**：行動力、決断の速さ、カリスマ性。
  - **短所**：自己中心的、傲慢になりがち。
  - **適職**：起業家、政治家、管理職、クリエイティブな分野。
  - **関連**：太陽のエネルギーは活力と名誉を象徴。インド占星術では出生図の太陽の位置が重要。

- **2（月：Chandra）**
  - **性格**：感受性豊か、協調性、優しさ、感情的、直感的。人の気持ちを理解する。
  - **能力**：調和を保つ力、共感力、対人関係の調整役。
  - **長所**：思いやり、柔軟性、チームワーク。
  - **短所**：優柔不断、依存心が強い場合も。
  - **適職**：カウンセラー、看護師、教師、対人サービス業。
  - **関連**：月のエネルギーは感情と心の安定を司る。月のナクシャトラが性格に影響。

- **3（木星：Guru/Brihaspati）**
  - **性格**：楽観的、創造的、社交的、知的好奇心旺盛、陽気。
  - **能力**：知識の探求、表現力、アイデアの創出、指導力。
  - **長所**：明るさ、創造性、学習意欲。
  - **短所**：散漫、計画性に欠ける場合も。
  - **適職**：作家、教師、アーティスト、宗教家。
  - **関連**：木星は知恵と拡大の惑星。ヴェーダではグルの教えが人生の指針に。

- **4（ラーフ：北の交点）**
  - **性格**：現実的、努力家、規律正しい、革新的、独自性。
  - **能力**：計画性、技術的才能、変化への適応力。
  - **長所**：誠実、責任感、粘り強さ。
  - **短所**：頑固、変化を嫌う傾向。
  - **適職**：エンジニア、建築家、技術者、革新者。
  - **関連**：ラーフは物質的欲望と革新を司る。カルマ的な挑戦を象徴。

- **5（水星：Budha）**
  - **性格**：好奇心旺盛、冒険心、柔軟、知的、コミュニケーション上手。
  - **能力**：情報収集、分析力、適応力、交渉力。
  - **長所**：機敏、学習能力、社交性。
  - **短所**：落ち着きがない、衝動的。
  - **適職**：ジャーナリスト、営業、旅行業、トレーナー。
  - **関連**：水星は知性とコミュニケーションを司る。ヴェーダでは知恵の象徴。

- **6（金星：Shukra）**
  - **性格**：愛情深い、芸術的、調和を愛する、魅力的、世話好き。
  - **能力**：美的センス、人を癒す力、対人関係の構築。
  - **長所**：優しさ、面倒見の良さ、美的感覚。
  - **短所**：過度なおせっかい、感情に流されやすい。
  - **適職**：アーティスト、デザイナー、教師、セラピスト。
  - **関連**：金星は愛と美を司る。ヴェーダでは贅沢と快楽の象徴。

- **7（ケートゥ：南の交点）**
  - **性格**：内省的、神秘的、知的、スピリチュアル、直感的。
  - **能力**：洞察力、研究心、精神的な探求。
  - **長所**：深い思考、独自の視点、集中力。
  - **短所**：孤立傾向、社交性の欠如。
  - **適職**：研究者、哲学者、占い師、スピリチュアルガイド。
  - **関連**：ケートゥは解脱と霊性を司る。カルマの解放に関連。

- **8（土星：Shani）**
  - **性格**：現実的、忍耐強い、野心的、責任感強い、規律正しい。
  - **能力**：長期的な目標達成、組織管理、逆境への耐性。
  - **長所**：粘り強さ、実行力、信頼性。
  - **短所**：厳格すぎる、冷淡に見える場合も。
  - **適職**：経営者、投資家、法律家、公務員。
  - **関連**：土星はカルマと努力を司る。ヴェーダでは試練の教師。

- **9（火星：Mangal）**
  - **性格**：情熱的、理想主義、博愛的、勇敢、行動的。
  - **能力**：リーダーシップ、問題解決、奉仕精神。
  - **長所**：寛容さ、使命感、行動力。
  - **短所**：現実性に欠ける、感情的になりすぎる。
  - **適職**：人道支援者、活動家、アーティスト、指導者。
  - **関連**：火星はエネルギー、勇気、闘争心を司る。ヴェーダでは情熱の象徴。

- **11（直感のマスター、ケートゥまたは月の影響）**
  - **性格**：鋭い直感、スピリチュアル、感受性豊か、カリスマ性。
  - **能力**：霊的洞察、インスピレーション、人の心を動かす力。
  - **長所**：ひらめき、創造的ビジョン、指導力。
  - **短所**：感情の起伏が激しい、ストレスに弱い。
  - **適職**：占い師、ヒーラー、アーティスト、スピリチュアルリーダー。
  - **関連**：ケートゥの霊性と月の感受性が強調。ヴェーダでは高次の悟りに関連。

- **22（建築のマスター、ラーフまたは土星の影響）**
  - **性格**：現実的、野心的、組織的、実行力強い。
  - **能力**：大きなビジョンを実現、チームを率いる力、計画性。
  - **長所**：実行力、責任感、実際的な成果。
  - **短所**：完璧主義、プレッシャーに弱い。
  - **適職**：建築家、起業家、政治家、プロジェクトマネージャー。
  - **関連**：ラーフの革新性と土星の規律が融合。物質的成功とカルマのバランス。

QEU:FOUNDER ： “誕生数が1と11では、その人の評価が全然違うでしょ？”

D先生：“ユリウス暦を使うと、日が１だけずれます。それでも、「正統なヴェーダ数秘術」を使うと大きく変わるんですね。”

QEU:FOUNDER ： “次は、名前の方面から見てみましょう。それでは、Numerology(数秘術)プログラムをドン！！”


```python
# ---
# numerology_calculator.py
import json
import logging
import re
from typing import List, Dict, Any, Tuple

# ロギングの設定 (デバッグ用)
logging.basicConfig(level=logging.INFO) # 必要に応じて WARNING に変更
logger = logging.getLogger(__name__)

def load_data():
    """JSONデータをロードする"""
    try:
        # KATAPAYADIマップのロード
        with open('katapayadi_map.json', 'r', encoding='utf-8') as f:
            katapayadi_data = json.load(f)
        # 数秘術データのロード
        with open('numerology_data.json', 'r', encoding='utf-8') as f:
            numerology_data = json.load(f)
        return {
            'katapayadi_map': katapayadi_data['katapayadi_map'],
            'vowels': katapayadi_data['vowels'],
            'consonants': katapayadi_data['consonants'],
            'numerology_data': numerology_data,
        }
    except Exception as e:
        logger.error(f"データのロード中にエラー: {str(e)}")
        # フォールバックデータを提供
        return {
            'katapayadi_map': {},
            'vowels': {},
            'consonants': {},
            'numerology_data': {},
        }

# ロードされたデータ
DATA = load_data()

class NumerologyCalculator:
    def __init__(self, data=None):
        """初期化時にデータをロードまたは受け取る"""
        if data is None:
            self.data = DATA
        else:
            self.data = data
        self.katapayadi_map = self.data['katapayadi_map']
        self.vowels = self.data['vowels']
        self.consonants = self.data['consonants']
        self.numerology_data = self.data['numerology_data']

    def _convert_name_to_numbers_with_details(self, full_name: str, char_type: str) -> Tu-ple[List[int], List[str]]:
        """名前をカタパヤディ方式で数値に変換し、対応する文字も返す"""
        numbers = []
        chars_used = []
        # 名前から括弧内の英語名を抽出、なければそのまま使用
        name_match = re.search(r'\(([A-Za-z ]+)\)', full_name)
        if name_match:
            name = name_match.group(1)
        else:
            name = full_name
        # 非アルファベット文字を削除し、小文字に変換
        name = re.sub(r'[^a-zA-Z]', '', name).lower()
        logger.debug(f"処理する名前: {name}, 文字タイプ: {char_type}")

        vowels_set = set('aeiou')
        i = 0
        while i < len(name):
            char = name[i]
            # 2文字の組み合わせをチェック（vowelsまたはconsonantsの場合のみ）
            if i + 1 < len(name):
                two_chars = name[i:i+2]
                if char_type == "vowels" and two_chars in self.vowels:
                    numbers.append(self.vowels[two_chars])
                    chars_used.append(two_chars)
                    logger.debug(f"2文字 '{two_chars}' → {self.vowels[two_chars]} (vowels)")
                    i += 2
                    continue
                elif char_type == "consonants" and two_chars in self.consonants:
                    numbers.append(self.consonants[two_chars])
                    chars_used.append(two_chars)
                    logger.debug(f"2文字 '{two_chars}' → {self.consonants[two_chars]} (consonants)")
                    i += 2
                    continue
            # 1文字をチェック
            if char_type == "all" and char in self.katapayadi_map:
                numbers.append(self.katapayadi_map[char])
                chars_used.append(char)
                logger.debug(f"1文字 '{char}' → {self.katapayadi_map[char]} (all)")
            elif char_type == "vowels" and char in self.vowels:
                numbers.append(self.vowels[char])
                chars_used.append(char)
                logger.debug(f"1文字 '{char}' → {self.vowels[char]} (vowels)")
            elif char_type == "consonants" and char in self.consonants and char not in vowels_set:
                numbers.append(self.consonants[char])
                chars_used.append(char)
                logger.debug(f"1文字 '{char}' → {self.consonants[char]} (consonants)")
            else:
                logger.debug(f"文字 '{char}' は{char_type}マッピングに存在しません")
            i += 1

        # フォールバック: 母音が検出されなかった場合
        if char_type == "vowels" and not numbers:
            first_vowel = next((c for c in name if c in vowels_set), 'a')
            numbers = [self.vowels.get(first_vowel, 1)]
            chars_used = [first_vowel]
            logger.warning(f"母音が検出されませんでした。仮の値を使用: {first_vowel} → {num-bers[0]}")

        # フォールバック: 子音が検出されなかった場合
        if char_type == "consonants" and not numbers:
            logger.warning(f"子音が検出されませんでした。デフォルト値として0を使用")
            numbers = [0]
            chars_used = ['(none)']

        return numbers, chars_used

    def _reduce_to_single_digit(self, number: int) -> int:
        """数値を1桁に還元"""
        if number in [11, 22, 33]:
            return number
        while number > 9:
            number = sum(int(digit) for digit in str(number))
            if number in [11, 22, 33]:
                break
        return number

    def calculate_destiny_number(self, full_name: str) -> Tuple[int, List[int], List[str]]:
        numbers, chars = self._convert_name_to_numbers_with_details(full_name, "all")
        total = sum(numbers)
        result = self._reduce_to_single_digit(total)
        logger.info(f"ディスティニーナンバー計算: {full_name} → {numbers} → {total} → {result}")
        return result, numbers, chars

    def calculate_soul_number(self, full_name: str) -> Tuple[int, List[int], List[str]]:
        numbers, chars = self._convert_name_to_numbers_with_details(full_name, "vowels")
        total = sum(numbers)
        result = self._reduce_to_single_digit(total)
        logger.info(f"ソウルナンバー計算: {full_name} → {numbers} → {total} → {result}")
        return result, numbers, chars

    def calculate_personality_number(self, full_name: str) -> Tuple[int, List[int], List[str]]:
        numbers, chars = self._convert_name_to_numbers_with_details(full_name, "consonants")
        total = sum(numbers)
        result = self._reduce_to_single_digit(total)
        logger.info(f"パーソナリティナンバー計算: {full_name} → {numbers} → {total} → {result}")
        return result, numbers, chars

    def interpret_number(self, number: int, number_type: str):
        """数秘術ナンバーの解釈を表示"""
        data = self.numerology_data.get(str(number), {})
        if not data:
            print(f"❌ {number_type} の解釈データが見つかりません。")
            return

        print(f"\n【{number_type} 解釈】")
        print(f"  数字: {number}")
        print(f"  惑星: {data.get('planet', '不明')}")
        print(f"  支配星座: {data.get('ruling_nakshatra', '不明')}")
        print(f"  強み: {', '.join(data.get('strengths', []))}")
        print(f"  弱み: {', '.join(data.get('weaknesses', []))}")
        print(f"  適した職業: {', '.join(data.get('career_suggestions', []))}")
        print(f"  健康アドバイス: {', '.join(data.get('health_advice', []))}")
        print(f"  ラッキーカラー: {', '.join(data.get('lucky_colors', []))}")
        print(f"  ラッキージェム: {', '.join(data.get('lucky_gems', []))}")
        print(f"  ラッキーメタル: {', '.join(data.get('lucky_metals', []))}")

# --- メイン実行ブロック ---
if __name__ == "__main__":
    calculator = NumerologyCalculator()

    test_name = "Steve Jobs (Steve Jobs)"
    print(f"--- {test_name} の数秘術ナンバー計算 ---")

    try:
        destiny, d_nums, d_chars = calculator.calculate_destiny_number(test_name)
        soul, s_nums, s_chars = calculator.calculate_soul_number(test_name)
        personality, p_nums, p_chars = calculator.calculate_personality_number(test_name)

        print(f"\n【詳細な対応】")
        print(f"ディスティニーナンバー: {d_chars} → {d_nums}")
        print(f"ソウルナンバー: {s_chars} → {s_nums}")
        print(f"パーソナリティナンバー: {p_chars} → {p_nums}")

        print(f"\n【結果】")
        print(f"ディスティニーナンバー (भाग्यांक): {destiny}")
        print(f"ソウルナンバー (आत्मा इच्छा अंक): {soul}")
        print(f"パーソナリティナンバー (व्यक्तित्व अंक): {personality}")

        # 解釈の表示
        calculator.interpret_number(destiny, "ディスティニーナンバー")
        calculator.interpret_number(soul, "ソウルナンバー")
        calculator.interpret_number(personality, "パーソナリティナンバー")

    except Exception as e:
        logger.error(f"計算中にエラーが発生しました: {e}")

```

QEU:FOUNDER ： “今回は、分析結果をいきなり出します。”

INFO:__main__:ディスティニーナンバー計算: Steve Jobs (Steve Jobs) → [5, 7, 6, 2, 6, 8, 7, 5, 5] → 51 → 6

INFO:__main__:ソウルナンバー計算: Steve Jobs (Steve Jobs) → [6, 6, 7] → 19 → 1

INFO:__main__:パーソナリティナンバー計算: Steve Jobs (Steve Jobs) → [5, 7, 2, 8, 5, 5] → 32 → 5

--- Steve Jobs (Steve Jobs) の数秘術ナンバー計算 ---

【詳細な対応】

ディスティニーナンバー: ['s', 't', 'e', 'v', 'e', 'j', 'o', 'b', 's'] → [5, 7, 6, 2, 6, 8, 7, 5, 5]

ソウルナンバー: ['e', 'e', 'o'] → [6, 6, 7]

パーソナリティナンバー: ['s', 't', 'v', 'j', 'b', 's'] → [5, 7, 2, 8, 5, 5]

【結果】

ディスティニーナンバー (भाग्यांक): 6

ソウルナンバー (आत्मा इच्छा अंक): 1

パーソナリティナンバー (व्यक्तित्व अंक): 5

【ディスティニーナンバー 解釈】

- 数字: 6
- 惑星: शुक्र (Shukra: 金星)
- 支配星座: पूर्वफाल्गुनी (Purva Phalguni: プルヴァ・パールグニ)
- 強み: 調和, 美意識, 愛情, 社交性, 芸術性
- 弱み: 浪費, 依存, わがまま, 現実逃避
- 適した職業: デザイナー, アーティスト, 音楽家, カウンセラー, 美容師
- 健康アドバイス: バランスの取れた食事, 適度な運動, 人間関係の管理
- ラッキーカラー: 緑, 青, 白
- ラッキージェム: ダイヤモンド
- ラッキーメタル: 銅

【ソウルナンバー 解釈】

- 数字: 1
- 惑星: सूर्य (Surya: 太陽)
- 支配星座: कृत्तिका (Krittika: クリッティカー)
- 強み: リーダーシップ, 独立心, 自信, 創造性, 意志力
- 弱み: 独断的, 自己中心的, 頑固, 衝動的
- 適した職業: 起業家, リーダー, 芸術家, 政治家, エンジニア
- 健康アドバイス: ストレス管理, 定期的な運動, 適度な休息
- ラッキーカラー: 赤, オレンジ, 金色
- ラッキージェム: ルビー
- ラッキーメタル: 金

【パーソナリティナンバー 解釈】

- 数字: 5
- 惑星: बुध (Budh: 水星)
- 支配星座: आश्लेषा (Ashlesha: アシュレーシャ)
- 強み: 知性, コミュニケーション, 適応力, 好奇心, 分析力
- 弱み: 不安定, 神経質, 批判的, 軽はずみ
- 適した職業: ジャーナリスト, 営業, 教師, 作家, コンサルタント
- 健康アドバイス: 適度な運動, 学びの継続, ストレス管理
- ラッキーカラー: 緑, 灰色, 茶色
- ラッキージェム: エメラルド
- ラッキーメタル: 水銀

D先生：“彼の運命数は、芸術家なのですね。これも、「正統なヴェーダ数秘術」を使ったとか。A国人の名前に対して・・・？”

QEU:FOUNDER ： “名前を**カタパヤディ方式**で数値に変換しています。これは若干、変則的になるしかないよね。さて、これは、いままで「大問題だった部分」なんです。以前は、**「ディスティニーナンバーとパーソナリティナンバーは同じ値」**だったのです。Vibe Codingでデバックを再三要求したのだが、全然治らなかったのです。”

D先生： “そもそも、ディスティニーナンバーとパーソナリティナンバーの定義は全然違います。同じ数字では、基本はあり得ません。”

QEU:FOUNDER ： “しかし、今回、プログラムを分割して短くするとバグが検出できるようになりました。”

D先生： “なるほどねえ・・・。”

![imageINDS2-41-6](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-6.jpg) 

QEU:FOUNDER  ： “今後、更に（プログラム）分割が必要になるでしょう。それにしても、Coderは便利です。この手のモデルは、数秘術のノウハウを質問することはできませんが、プログラムの分割操作は、とても正確です。”


## ～ まとめ ～

QEU:FOUNDER ： “やっぱり、ガッツポーズしたね。”

![imageINDS2-41-7](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-7.jpg) 

C部長：“うまく**「シンクロ（↓）」**していましたからね。”

![imageINDS2-41-8](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-8.jpg) 

C部長：“怒っている人も多いのでしょうね。”

![imageINDS2-41-9](/2025-08-16-QEUR23_INDHS41/imageINDS2-41-9.jpg) 

QEU:FOUNDER ： “さぞかし、お偉い方（↑）なのでしょう・・・。”

[![MOVIE1](http://img.youtube.com/vi/yxSEO4tCWN8/0.jpg)](http://www.youtube.com/watch?v=yxSEO4tCWN8 "『15年戦争小史』を読む 第4回 最終回 真珠湾、ミッドウェー、サイパン、本土空襲、沖縄、広島、長崎、そして8月15日")

C部長：“過去にいろいろやらかしましたから。”

### 古い(平成)おっさん（＠QCサークル講話）；「従業員の皆さんにはテレビを見てください。皆が同じように考えてください。」

### 古い(平成)オッサン（＠車中、N社検査不正について）： 「“検査不正”っていうのはなァ、（組織外に不正を）漏らしたヤツが悪いんだよ・・・」
  
### 古い(平成)オッサン（海外工場のあいさつにて、なんと201X年のセリフじゃ！）：「私の使命はこの会社で終身雇用制を実現することにある・・・。」

D先生：“人間は、そう簡単には変わらない。**いまでも敗戦はつづく**。反省は必要ですね、自戒を込めて・・・。”

